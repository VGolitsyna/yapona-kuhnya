{"version":3,"sources":["components/Cart/DeliveryForm.module.css","components/UI/Loading.module.css","components/Cart/Cart.module.css","components/Cart/CartItem.module.css","components/Layout/HeaderCartButton.module.css","components/UI/Modal.module.css","components/Meals/MealItem/MealItem.module.css","components/Layout/Header.module.css","components/Meals/PromoText.module.css","components/Meals/MealList.module.css","components/UI/Card.module.css","components/UI/Input.module.css","components/Meals/MealItem/MealItemForm.module.css","components/UI/Modal.js","store/cart-context.js","components/Cart/CartItem.js","hooks/useValidInput.js","components/Cart/DeliveryForm.js","components/Cart/Cart.js","assets/sushi.jpg","components/Cart/CartIcon.js","components/Layout/HeaderCartButton.js","components/Layout/Header.js","components/Meals/PromoText.js","components/UI/Card.js","components/UI/Input.js","components/Meals/MealItem/MealItemForm.js","components/Meals/MealItem/MealItem.js","components/UI/Loading.jsx","components/UI/Error.jsx","components/Meals/MealList.js","components/Meals/Meals.js","store/CartContextProvider.js","App.js","index.js"],"names":["module","exports","Backdrop","props","className","styles","backdrop","onClick","onHideCart","ModalWindow","modal","content","children","portalElement","document","getElementById","Modal","Fragment","ReactDOM","createPortal","CartContext","React","createContext","items","totalAmount","addItem","item","removeItem","id","CartItem","price","toFixed","classes","name","summary","amount","actions","onRemove","onAdd","useValidInput","useState","value","setValue","wasTouch","setWasTouch","itHasError","setItHasError","inputOnChange","e","target","inputOnBlur","trim","DeliveryForm","closeForm","cartItems","sendingOrder","setSendingOrder","sendingError","setSendingError","orderSend","setOrderSend","fullNameValue","fullNameHasError","fullNameWasTouch","fullNameOnChangeHandler","fullNameOnBlurHandler","addressValue","addressHasError","addressOnChangeHandler","addressOnBlurHandler","telValue","telHasError","telOnChangeHandler","telOnBlurHandler","sendOrder","a","preventDefault","fetch","method","body","JSON","stringify","user","orderedMeals","address","tel","ok","Error","message","loading","form","onSubmit","control","invalid","htmlFor","type","placeholder","onChange","onBlur","submit","disabled","Cart","cartContext","useContext","openDeliveryForm","setOpenDeliveryForm","Math","abs","hasItems","length","removeCartItemHandler","addCartItemHandler","map","bind","total","button","CartIcon","xmlns","viewBox","fill","d","HeaderCartButton","isButtonAnimated","setIsButtonAnimated","cartItemsNumber","reduce","currentValue","buttonClasses","bump","useEffect","timer","setTimeout","clearTimeout","icon","badge","Header","header","onShowCart","src","sushiImage","alt","PromoText","Card","card","Input","forwardRef","ref","input","label","MealItemForm","isAmountValid","setIsAmountValid","amountInputRef","useRef","event","inputAmount","current","onAddToCart","min","step","defaultValue","MealItem","formattedPrice","meal","description","Loading","container","MealList","meals","setMeals","isLoading","setIsLoading","isError","setIsError","response","json","mealsArray","key","push","getMeals","catch","err","mealList","Meals","fallback","defaultCartState","cartReducer","state","action","updatedItem","updatedItems","updatedTotalAmount","existingCartItemIndex","findIndex","existingCartItem","concat","filter","CartContextProvider","useReducer","cartState","dispatchCartAction","Provider","App","cartIsVisible","setCartIsVisible","render"],"mappings":"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","file":"static/js/main.06f73a3a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"DeliveryForm_form__3HVk8\",\"control\":\"DeliveryForm_control__3y7Bi\",\"actions\":\"DeliveryForm_actions__xZaK1\",\"submit\":\"DeliveryForm_submit__2edJz\",\"invalid\":\"DeliveryForm_invalid__eyd56\",\"loading\":\"DeliveryForm_loading__EUY7B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loading_container__r1kwo\",\"loading\":\"Loading_loading__3hV3m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-items\":\"Cart_cart-items__2pbYV\",\"total\":\"Cart_total__304Kj\",\"actions\":\"Cart_actions__2pX3v\",\"button--alt\":\"Cart_button--alt__3PnaJ\",\"button\":\"Cart_button__29o2c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-item\":\"CartItem_cart-item__3sz8W\",\"summary\":\"CartItem_summary__2dFN8\",\"price\":\"CartItem_price__2AGCO\",\"amount\":\"CartItem_amount__3grO0\",\"actions\":\"CartItem_actions__PujWx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"HeaderCartButton_button__clX_E\",\"icon\":\"HeaderCartButton_icon__3oGL-\",\"badge\":\"HeaderCartButton_badge__bvyqk\",\"bump\":\"HeaderCartButton_bump__3l9z5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__1ptrs\",\"modal\":\"Modal_modal__3bMdz\",\"slide-down\":\"Modal_slide-down__2Dt5v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meal\":\"MealItem_meal__3D77J\",\"description\":\"MealItem_description__1rkYy\",\"price\":\"MealItem_price__1DZPn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1XK5G\",\"main-image\":\"Header_main-image__1nWQe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"promo-text\":\"PromoText_promo-text__2r1_0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meals\":\"MealList_meals__2Wqc0\",\"meals-appear\":\"MealList_meals-appear__3RzuM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3sFfP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__KN3ov\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"MealItemForm_form__3DQmK\"};","import React from \"react\";\nimport styles from \"./Modal.module.css\";\nimport ReactDOM from \"react-dom\";\n\nconst Backdrop = (props) => {\n  return <div className={styles.backdrop} onClick={props.onHideCart}></div>;\n};\n\nconst ModalWindow = (props) => {\n  return (\n    <div className={styles.modal}>\n      <div className={styles.content}>{props.children}</div>\n    </div>\n  );\n};\n\nconst portalElement = document.getElementById(\"overlays\");\n\nconst Modal = (props) => {\n  return (\n    <React.Fragment>\n      {ReactDOM.createPortal(\n        <Backdrop onHideCart={props.onHideCart} />,\n        portalElement\n      )}\n      {ReactDOM.createPortal(\n        <ModalWindow>{props.children}</ModalWindow>,\n        portalElement\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default Modal;\n","import React from \"react\";\n\nconst CartContext = React.createContext({\n  items: [],\n  totalAmount: 0,\n  addItem: (item) => {},\n  removeItem: (id) => {},\n});\n\nexport default CartContext;\n","import classes from \"./CartItem.module.css\";\n\n\nconst CartItem = (props) => {\n  const price = `$${props.price.toFixed(2)}`;\n\n  return (\n    <li className={classes[\"cart-item\"]}>\n      <div>\n        <h2>{props.name}</h2>\n        <div className={classes.summary}>\n          <span className={classes.price}>{price}</span>\n          <span className={classes.amount}>x {props.amount}</span>\n        </div>\n      </div>\n      <div className={classes.actions}>\n        <button onClick={props.onRemove}>−</button>\n        <button onClick={props.onAdd}>+</button>\n      </div>\n    </li>\n  );\n};\n\nexport default CartItem;\n","import {useState} from 'react';\r\n\r\nconst useValidInput = () => {\r\n    const [value, setValue] = useState('');\r\n    const [wasTouch, setWasTouch] = useState(false);\r\n    const [itHasError, setItHasError] = useState(false)\r\n\r\n\r\n    const inputOnChange = (e) => {\r\n        setValue(e.target.value);\r\n        setWasTouch(true);\r\n        setItHasError(false);\r\n    }\r\n\r\n    const inputOnBlur = (e) => {\r\n        setWasTouch(true);\r\n        if (e.target.value.trim() === ''){\r\n            setItHasError(true);\r\n        }\r\n    }\r\n\r\n    return {\r\n        value,\r\n        wasTouch,\r\n        itHasError,\r\n        inputOnChange,\r\n        inputOnBlur\r\n    }\r\n\r\n}\r\n\r\nexport default useValidInput;","import styles from './DeliveryForm.module.css';\r\nimport useValidInput from '../../hooks/useValidInput';\r\nimport { useState } from 'react';\r\n\r\nconst DeliveryForm = ({closeForm, cartItems}) => {\r\n  const [sendingOrder, setSendingOrder] = useState(false);\r\n  const [sendingError, setSendingError] = useState('');\r\n  const [orderSend, setOrderSend] = useState(false);\r\n\r\n  const {value: fullNameValue,\r\n        itHasError: fullNameHasError,\r\n        wasTouch: fullNameWasTouch,\r\n        inputOnChange: fullNameOnChangeHandler,\r\n        inputOnBlur: fullNameOnBlurHandler} = useValidInput();\r\n\r\n  const {value: addressValue,\r\n        itHasError: addressHasError,\r\n        inputOnChange: addressOnChangeHandler,\r\n        inputOnBlur: addressOnBlurHandler} = useValidInput();\r\n\r\n  const {value: telValue,\r\n        itHasError: telHasError,\r\n        inputOnChange: telOnChangeHandler,\r\n        inputOnBlur: telOnBlurHandler} = useValidInput();\r\n\r\n  const sendOrder = async(e) => {\r\n    e.preventDefault();\r\n    if (fullNameHasError || addressHasError || telHasError){\r\n      return;\r\n    }\r\n    setSendingOrder(true);\r\n\r\n    try{\r\n      const sendOrder = await fetch('https://apps-93cf2-default-rtdb.firebaseio.com/orders.json', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          user: fullNameValue,\r\n          orderedMeals: cartItems.items,\r\n          address: addressValue,\r\n          tel: telValue,\r\n        })\r\n      })\r\n  \r\n      if(!sendOrder.ok){\r\n        throw new Error ('Что-то пошло не так')         \r\n      }\r\n      setSendingOrder(false)\r\n      setOrderSend(true);\r\n\r\n    } catch (e){\r\n      setSendingOrder(false);\r\n      setSendingError(e.message);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  if (sendingOrder === true){\r\n    return <p className={styles.loading}>Загрузка...</p>\r\n  }\r\n\r\n  if(sendingError !== ''){\r\n    return <p className={styles.loading}>{sendingError}</p>\r\n  }\r\n\r\n  if(orderSend){\r\n    return <p className={styles.loading}>Заказ выполнен</p>\r\n  }\r\n  \r\n    return <form className={styles.form}  onSubmit={sendOrder}>\r\n        <div className={fullNameHasError ? `${styles.control} ${styles.invalid}` : styles.control}> \r\n            <label htmlFor=\"full-name\">Имя</label>\r\n            <input type=\"text\" \r\n            id=\"full-name\" \r\n            placeholder=\"Введите имя\"\r\n            value={fullNameValue} \r\n            onChange={fullNameOnChangeHandler}\r\n            onBlur={fullNameOnBlurHandler}/>\r\n            {fullNameHasError ? <p className={styles.invalid}>Поле должно быть заполнено</p> : '' }\r\n        </div>\r\n        <div className={addressHasError? `${styles.control} ${styles.invalid}` : styles.control}> \r\n          <label htmlFor=\"address\">Адрес</label>\r\n            <input type=\"text\" \r\n            id=\"address\" \r\n            placeholder=\"Улица, дом, подъезд, квартира\"\r\n            value={addressValue}\r\n            onChange={addressOnChangeHandler}\r\n            onBlur={addressOnBlurHandler}  />\r\n            {addressHasError ? <p className={styles.invalid}>Поле должно быть заполнено</p> : '' }\r\n        </div>\r\n        <div className={telHasError ? `${styles.control} ${styles.invalid}` : styles.control}> \r\n        <label htmlFor=\"phone\">Номер телефона</label>\r\n            <input type=\"tel\" \r\n            id=\"phone\" \r\n            placeholder=\"Введите номер телефона\"\r\n            value={telValue}\r\n            onChange={telOnChangeHandler}\r\n            onBlur={telOnBlurHandler}            \r\n              />\r\n              {telHasError ? <p className={styles.invalid}>Поле должно быть заполнено</p> : '' }\r\n        </div>\r\n        <div className={styles.actions}>\r\n          <button className={styles.submit} disabled={!fullNameWasTouch || fullNameHasError || addressHasError || telHasError}>Подтвердить заказ</button>\r\n          <button onClick={closeForm}>Отменить</button>        \r\n          </div>\r\n    </form>\r\n}\r\n\r\nexport default DeliveryForm;","import Modal from \"../UI/Modal\";\nimport styles from \"./Cart.module.css\";\nimport { useState, useContext } from \"react\";\nimport CartContext from \"../../store/cart-context\";\nimport CartItem from \"./CartItem\";\nimport DeliveryForm from \"./DeliveryForm\";\n\n\nconst Cart = (props) => {\n  const cartContext = useContext(CartContext);\n\n  const [openDeliveryForm, setOpenDeliveryForm] = useState(false);\n\n  const openDeliveryFormHandler = (e) => {\n    e.preventDefault();\n    setOpenDeliveryForm(true);\n  }\n\n  const totalAmount = `${Math.abs(cartContext.totalAmount).toFixed(2)} руб`;\n  const hasItems = cartContext.items.length > 0;\n\n  const removeCartItemHandler = (id) => {\n    cartContext.removeItem(id);\n  };\n\n  const addCartItemHandler = (item) => {\n    cartContext.addItem({ ...item, amount: 1 });\n  };\n\n  const cartItems = (\n    <ul className={styles[\"cart-items\"]}>\n      {cartContext.items.map((item) => (\n        <CartItem\n          key={item.id}\n          name={item.name}\n          amount={item.amount}\n          price={item.price}\n          onAdd={addCartItemHandler.bind(null, item)}\n          onRemove={removeCartItemHandler.bind(null, item.id)}\n        />\n      ))}\n    </ul>\n  );\n\n  return (\n    <Modal onHideCart={props.onHideCart}>\n      {cartItems}\n      \n      <div className={styles.total}>\n        <span>Итого</span>\n        <span>{totalAmount}</span>\n      </div>\n      {openDeliveryForm ? <DeliveryForm closeForm={props.onHideCart} cartItems={cartContext}/> : <div className={styles.actions}>\n        <button className={styles[\"button--alt\"]} onClick={props.onHideCart}>\n          Закрыть\n        </button>\n        {hasItems && <button className={styles.button} onClick={openDeliveryFormHandler}>Заказать</button>}\n      </div>}\n      \n    </Modal>\n  );\n};\n\nexport default Cart;\n","export default __webpack_public_path__ + \"static/media/sushi.a2b4b921.jpg\";","const CartIcon = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 20 20\"\n      fill=\"currentColor\"\n    >\n      <path d=\"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z\" />\n    </svg>\n  );\n};\n\nexport default CartIcon;\n","import { useContext, useEffect, useState } from \"react\";\nimport CartContext from \"../../store/cart-context\";\nimport CartIcon from \"../Cart/CartIcon\";\nimport styles from \"./HeaderCartButton.module.css\";\n\nconst HeaderCartButton = (props) => {\n  const [isButtonAnimated, setIsButtonAnimated] = useState(false);\n  const cartContext = useContext(CartContext);\n\n  const cartItemsNumber = cartContext.items.reduce((currentValue, item) => {\n    return currentValue + item.amount;\n  }, 0);\n\n  const buttonClasses = `${styles.button} ${\n    isButtonAnimated ? styles.bump : \"\"\n  }`;\n\n  useEffect(() => {\n    if (cartContext.items.length === 0) {\n      return;\n    }\n    setIsButtonAnimated(true);\n\n    const timer = setTimeout(() => {\n      setIsButtonAnimated(false);\n    }, 300);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [cartContext.items]);\n\n  return (\n    <button className={buttonClasses} onClick={props.onClick}>\n      <span className={styles.icon}>\n        <CartIcon />\n      </span>\n      <span>Корзина</span>\n      <span className={styles.badge}>{cartItemsNumber}</span>\n    </button>\n  );\n};\n\nexport default HeaderCartButton;\n","import React from \"react\";\nimport sushiImage from \"../../assets/sushi.jpg\";\nimport styles from \"./Header.module.css\";\nimport HeaderCartButton from \"./HeaderCartButton\";\n\nconst Header = (props) => {\n  return (\n    <React.Fragment>\n      <header className={styles.header}>\n        <h1>Япона Кухня</h1>\n        <HeaderCartButton onClick={props.onShowCart} />\n      </header>\n      <div className={styles[\"main-image\"]}>\n        <img src={sushiImage} alt=\"Блюда японской кухни\" />\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default Header;\n","import styles from \"./PromoText.module.css\";\n\nconst PromoText = () => {\n  return (\n    <section className={styles[\"promo-text\"]}>\n      <h2>Онлайн Суши Ресторан Япона Кухня</h2>\n      <p>\n        Япона Кухня - это онлайн суши-ресторан, в котором любимые суши и сашими,\n        роллы и другие блюда национальной японской кухни делает команда\n        профессиональных поваров.\n      </p>\n      <p>\n        Быстрая работа и качественная продукция, а также самые настоящие\n        компоненты придают хороший вкус блюдам, дарят наслаждение от трапезы.\n      </p>\n    </section>\n  );\n};\n\nexport default PromoText;\n","import styles from \"./Card.module.css\";\n\nconst Card = (props) => {\n  return <div className={styles.card}>{props.children}</div>;\n};\n\nexport default Card;\n","import styles from \"./Input.module.css\";\nimport React from \"react\";\n\nconst Input = React.forwardRef((props, ref) => {\n  return (\n    <div className={styles.input}>\n      <label htmlFor={props.input.id}>{props.label}</label>\n      <input ref={ref} {...props.input} />\n    </div>\n  );\n});\n\nexport default Input;\n","import { useRef, useState } from \"react\";\n\nimport Input from \"../../UI/Input\";\nimport styles from \"./MealItemForm.module.css\";\n\nconst MealItemForm = (props) => {\n  const [isAmountValid, setIsAmountValid] = useState(true);\n  const amountInputRef = useRef();\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const inputAmount = amountInputRef.current.value;\n    if (\n      inputAmount.trim().length === 0 ||\n      +inputAmount < 1 ||\n      +inputAmount > 10\n    ) {\n      setIsAmountValid(false);\n      return;\n    }\n\n    props.onAddToCart(+inputAmount);\n  };\n\n  return (\n    <form className={styles.form} onSubmit={submitHandler}>\n      <Input\n        ref={amountInputRef}\n        label=\"Количество\"\n        input={{\n          id: props.id,\n          type: \"number\",\n          min: \"1\",\n          step: \"1\",\n          defaultValue: \"1\",\n        }}\n      />\n      <button>Добавить</button>\n      {!isAmountValid && <p>Пожалуйста введите количество от 1 до 10</p>}\n    </form>\n  );\n};\n\nexport default MealItemForm;\n","import styles from \"./MealItem.module.css\";\nimport MealItemForm from \"./MealItemForm\";\nimport { useContext } from \"react\";\nimport CartContext from \"../../../store/cart-context\";\n\nconst MealItem = (props) => {\n  const cartContext = useContext(CartContext);\n  const formattedPrice = `${props.price.toFixed(2)} руб`;\n\n  const addToCartHandler = (amount) => {\n    cartContext.addItem({\n      id: props.id,\n      name: props.name,\n      amount: amount,\n      price: props.price,\n    });\n  };\n\n  return (\n    <li className={styles.meal}>\n      <div>\n        <h3>{props.name}</h3>\n        <div className={styles.description}>{props.description}</div>\n        <div className={styles.price}>{formattedPrice}</div>\n      </div>\n      <div>\n        <MealItemForm onAddToCart={addToCartHandler} id={props.id} />\n      </div>\n    </li>\n  );\n};\n\nexport default MealItem;\n","import styles from './Loading.module.css';\r\n\r\nconst Loading = () => {\r\n\r\n  return(\r\n    <section className={styles.container}>\r\n      <span className={styles.loading}>Загрузка...</span>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Loading","import styles from './Loading.module.css';\r\n\r\nconst Error = () => {\r\n  return(\r\n    <section className={styles.container}>\r\n      <span className={styles.loading}>Произошла ошибка сервера, попробуйте снова.</span>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Error;","import styles from \"./MealList.module.css\";\nimport Card from \"../UI/Card\";\nimport MealItem from \"./MealItem/MealItem\";\nimport Loading from \"../UI/Loading\";\nimport Error from \"../UI/Error\";\nimport {useState, useEffect} from 'react';\n\n\nconst MealList = () => {\n\n  const [meals, setMeals] = useState([]);\n  const [isLoading, setIsLoading] = useState(false)\n  const [isError, setIsError] = useState();\n\n  useEffect(() => {\n      async function getMeals () {  \n        setIsLoading(true)\n        let response = await fetch('https://apps-93cf2-default-rtdb.firebaseio.com/meals.json');\n        if (!response.ok){\n          throw new Error('Произошла ошибка');\n        }\n\n        let meals = await response.json();\n        let mealsArray = [];\n  \n        for (let key of meals){\n          if (key == null){\n            continue\n          }\n\n          mealsArray.push({\n            id: key.id,\n            name: key.name,\n            description: key.description,\n            price: key.price\n          })\n        }\n        \n        setMeals(mealsArray);\n        setIsLoading(false);\n      }\n\n        getMeals().catch(err => {\n          setIsLoading(false);\n          setIsError(err.message)});\n  }, [])\n  \n  const mealList = meals.map((meal) => (\n    <MealItem\n      key={meal.id}\n      id={meal.id}\n      name={meal.name}\n      description={meal.description}\n      price={meal.price}\n    />\n  ));\n\n  if (isLoading){\n    return <Loading />\n  }\n\n  if(isError){\n    return <Error/>\n  }\n\n  return (\n    <section className={styles.meals}>\n      <Card>\n        <ul>{mealList}</ul>\n      </Card>\n\n    </section>\n  );\n};\n\nexport default MealList;\n","import PromoText from \"./PromoText\";\nimport MealList from \"./MealList\";\nimport React from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\"\n\nconst Meals = () => {\n  return (\n    <React.Fragment>\n      <PromoText />\n      <ErrorBoundary fallback={<p>Что-то пошло не так</p>}> \n        <MealList /> \n      </ErrorBoundary>\n    </React.Fragment>\n  );\n};\n\nexport default Meals;\n","import { useReducer } from \"react\";\n\nimport CartContext from \"./cart-context\";\n\nconst defaultCartState = {\n  items: [],\n  totalAmount: 0,\n};\n\nconst cartReducer = (state, action) => {\n  if (action.type === \"ADD_ITEM\") {\n    const updatedTotalAmount =\n      state.totalAmount + action.item.price * action.item.amount;\n\n    const existingCartItemIndex = state.items.findIndex((item) => {\n      return item.id === action.item.id;\n    });\n\n    const existingCartItem = state.items[existingCartItemIndex];\n\n    let updatedItem;\n    let updatedItems;\n\n    if (existingCartItem) {\n      updatedItem = {\n        ...existingCartItem,\n        amount: existingCartItem.amount + action.item.amount,\n      };\n\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    } else {\n      updatedItem = {\n        ...action.item,\n      };\n      updatedItems = state.items.concat(updatedItem);\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n    };\n  }\n\n  if (action.type === \"REMOVE_ITEM\") {\n    const existingCartItemIndex = state.items.findIndex((item) => {\n      return item.id === action.id;\n    });\n\n    const existingCartItem = state.items[existingCartItemIndex];\n\n    const updatedTotalAmount = state.totalAmount - existingCartItem.price;\n\n    let updatedItems;\n    if (existingCartItem.amount === 1) {\n      updatedItems = state.items.filter((item) => item.id !== action.id);\n    } else {\n      const updatedItem = {\n        ...existingCartItem,\n        amount: existingCartItem.amount - 1,\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n    };\n  }\n\n  return defaultCartState;\n};\n\nconst CartContextProvider = (props) => {\n  const [cartState, dispatchCartAction] = useReducer(\n    cartReducer,\n    defaultCartState\n  );\n\n  const addItemHandler = (item) => {\n    dispatchCartAction({\n      type: \"ADD_ITEM\",\n      item: item,\n    });\n  };\n\n  const removeItemHandler = (id) => {\n    dispatchCartAction({\n      type: \"REMOVE_ITEM\",\n      id: id,\n    });\n  };\n\n  const cartContext = {\n    items: cartState.items,\n    totalAmount: cartState.totalAmount,\n    addItem: addItemHandler,\n    removeItem: removeItemHandler,\n  };\n\n  return (\n    <CartContext.Provider value={cartContext}>\n      {props.children}\n    </CartContext.Provider>\n  );\n};\n\nexport default CartContextProvider;\n","import React, { useState } from \"react\";\nimport Cart from \"./components/Cart/Cart\";\nimport Header from \"./components/Layout/Header\";\nimport Meals from \"./components/Meals/Meals\";\nimport CartContextProvider from \"./store/CartContextProvider\";\n\n\nfunction App() {\n  const [cartIsVisible, setCartIsVisible] = useState(false);\n\n  const showCartHandler = () => {\n    setCartIsVisible(true);\n  };\n\n  const hideCartHandler = () => {\n    setCartIsVisible(false);\n  };\n\n  return (\n    <CartContextProvider>\n      {cartIsVisible && <Cart onHideCart={hideCartHandler} />}\n      <Header onShowCart={showCartHandler} />\n      <main>\n        <Meals />\n      </main>\n    </CartContextProvider>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}