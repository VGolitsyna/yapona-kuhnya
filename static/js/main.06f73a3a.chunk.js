(this["webpackJsonpjapanese-food"]=this["webpackJsonpjapanese-food"]||[]).push([[0],[,,,function(e,t,n){e.exports={form:"DeliveryForm_form__3HVk8",control:"DeliveryForm_control__3y7Bi",actions:"DeliveryForm_actions__xZaK1",submit:"DeliveryForm_submit__2edJz",invalid:"DeliveryForm_invalid__eyd56",loading:"DeliveryForm_loading__EUY7B"}},,,,function(e,t,n){e.exports={container:"Loading_container__r1kwo",loading:"Loading_loading__3hV3m"}},function(e,t,n){e.exports={"cart-items":"Cart_cart-items__2pbYV",total:"Cart_total__304Kj",actions:"Cart_actions__2pX3v","button--alt":"Cart_button--alt__3PnaJ",button:"Cart_button__29o2c"}},function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__3sz8W",summary:"CartItem_summary__2dFN8",price:"CartItem_price__2AGCO",amount:"CartItem_amount__3grO0",actions:"CartItem_actions__PujWx"}},,,function(e,t,n){e.exports={button:"HeaderCartButton_button__clX_E",icon:"HeaderCartButton_icon__3oGL-",badge:"HeaderCartButton_badge__bvyqk",bump:"HeaderCartButton_bump__3l9z5"}},,function(e,t,n){e.exports={backdrop:"Modal_backdrop__1ptrs",modal:"Modal_modal__3bMdz","slide-down":"Modal_slide-down__2Dt5v"}},function(e,t,n){e.exports={meal:"MealItem_meal__3D77J",description:"MealItem_description__1rkYy",price:"MealItem_price__1DZPn"}},,function(e,t,n){e.exports={header:"Header_header__1XK5G","main-image":"Header_main-image__1nWQe"}},,function(e,t,n){e.exports={"promo-text":"PromoText_promo-text__2r1_0"}},,function(e,t,n){e.exports={meals:"MealList_meals__2Wqc0","meals-appear":"MealList_meals-appear__3RzuM"}},function(e,t,n){e.exports={card:"Card_card__3sFfP"}},function(e,t,n){e.exports={input:"Input_input__KN3ov"}},function(e,t,n){e.exports={form:"MealItemForm_form__3DQmK"}},,,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(10),c=n.n(a),r=(n(30),n(2)),i=n(1),s=n.n(i),o=n(4),l=n(14),u=n.n(l),d=n(0),j=function(e){return Object(d.jsx)("div",{className:u.a.backdrop,onClick:e.onHideCart})},m=function(e){return Object(d.jsx)("div",{className:u.a.modal,children:Object(d.jsx)("div",{className:u.a.content,children:e.children})})},b=document.getElementById("overlays"),O=function(e){return Object(d.jsxs)(s.a.Fragment,{children:[c.a.createPortal(Object(d.jsx)(j,{onHideCart:e.onHideCart}),b),c.a.createPortal(Object(d.jsx)(m,{children:e.children}),b)]})},p=n(8),x=n.n(p),h=s.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){}}),f=n(9),_=n.n(f),v=function(e){var t="$".concat(e.price.toFixed(2));return Object(d.jsxs)("li",{className:_.a["cart-item"],children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:e.name}),Object(d.jsxs)("div",{className:_.a.summary,children:[Object(d.jsx)("span",{className:_.a.price,children:t}),Object(d.jsxs)("span",{className:_.a.amount,children:["x ",e.amount]})]})]}),Object(d.jsxs)("div",{className:_.a.actions,children:[Object(d.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(d.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},C=n(13),N=n(6),g=n.n(N),k=n(3),y=n.n(k),I=function(){var e=Object(i.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),s=Object(r.a)(c,2),o=s[0],l=s[1],u=Object(i.useState)(!1),d=Object(r.a)(u,2),j=d[0],m=d[1];return{value:n,wasTouch:o,itHasError:j,inputOnChange:function(e){a(e.target.value),l(!0),m(!1)},inputOnBlur:function(e){l(!0),""===e.target.value.trim()&&m(!0)}}},H=function(e){var t=e.closeForm,n=e.cartItems,a=Object(i.useState)(!1),c=Object(r.a)(a,2),s=c[0],o=c[1],l=Object(i.useState)(""),u=Object(r.a)(l,2),j=u[0],m=u[1],b=Object(i.useState)(!1),O=Object(r.a)(b,2),p=O[0],x=O[1],h=I(),f=h.value,_=h.itHasError,v=h.wasTouch,N=h.inputOnChange,k=h.inputOnBlur,H=I(),w=H.value,M=H.itHasError,F=H.inputOnChange,E=H.inputOnBlur,S=I(),A=S.value,D=S.itHasError,B=S.inputOnChange,T=S.inputOnBlur,P=function(){var e=Object(C.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(_||M||D)){e.next=3;break}return e.abrupt("return");case 3:return o(!0),e.prev=4,e.next=7,fetch("https://apps-93cf2-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify({user:f,orderedMeals:n.items,address:w,tel:A})});case 7:if(e.sent.ok){e.next=10;break}throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 10:o(!1),x(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),o(!1),m(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return!0===s?Object(d.jsx)("p",{className:y.a.loading,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):""!==j?Object(d.jsx)("p",{className:y.a.loading,children:j}):p?Object(d.jsx)("p",{className:y.a.loading,children:"\u0417\u0430\u043a\u0430\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):Object(d.jsxs)("form",{className:y.a.form,onSubmit:P,children:[Object(d.jsxs)("div",{className:_?"".concat(y.a.control," ").concat(y.a.invalid):y.a.control,children:[Object(d.jsx)("label",{htmlFor:"full-name",children:"\u0418\u043c\u044f"}),Object(d.jsx)("input",{type:"text",id:"full-name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:f,onChange:N,onBlur:k}),_?Object(d.jsx)("p",{className:y.a.invalid,children:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}):""]}),Object(d.jsxs)("div",{className:M?"".concat(y.a.control," ").concat(y.a.invalid):y.a.control,children:[Object(d.jsx)("label",{htmlFor:"address",children:"\u0410\u0434\u0440\u0435\u0441"}),Object(d.jsx)("input",{type:"text",id:"address",placeholder:"\u0423\u043b\u0438\u0446\u0430, \u0434\u043e\u043c, \u043f\u043e\u0434\u044a\u0435\u0437\u0434, \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0430",value:w,onChange:F,onBlur:E}),M?Object(d.jsx)("p",{className:y.a.invalid,children:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}):""]}),Object(d.jsxs)("div",{className:D?"".concat(y.a.control," ").concat(y.a.invalid):y.a.control,children:[Object(d.jsx)("label",{htmlFor:"phone",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),Object(d.jsx)("input",{type:"tel",id:"phone",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",value:A,onChange:B,onBlur:T}),D?Object(d.jsx)("p",{className:y.a.invalid,children:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}):""]}),Object(d.jsxs)("div",{className:y.a.actions,children:[Object(d.jsx)("button",{className:y.a.submit,disabled:!v||_||M||D,children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(d.jsx)("button",{onClick:t,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})},w=function(e){var t=Object(i.useContext)(h),n=Object(i.useState)(!1),a=Object(r.a)(n,2),c=a[0],s=a[1],l="".concat(Math.abs(t.totalAmount).toFixed(2)," \u0440\u0443\u0431"),u=t.items.length>0,j=function(e){t.removeItem(e)},m=function(e){t.addItem(Object(o.a)(Object(o.a)({},e),{},{amount:1}))},b=Object(d.jsx)("ul",{className:x.a["cart-items"],children:t.items.map((function(e){return Object(d.jsx)(v,{name:e.name,amount:e.amount,price:e.price,onAdd:m.bind(null,e),onRemove:j.bind(null,e.id)},e.id)}))});return Object(d.jsxs)(O,{onHideCart:e.onHideCart,children:[b,Object(d.jsxs)("div",{className:x.a.total,children:[Object(d.jsx)("span",{children:"\u0418\u0442\u043e\u0433\u043e"}),Object(d.jsx)("span",{children:l})]}),c?Object(d.jsx)(H,{closeForm:e.onHideCart,cartItems:t}):Object(d.jsxs)("div",{className:x.a.actions,children:[Object(d.jsx)("button",{className:x.a["button--alt"],onClick:e.onHideCart,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),u&&Object(d.jsx)("button",{className:x.a.button,onClick:function(e){e.preventDefault(),s(!0)},children:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"})]})]})},M=n.p+"static/media/sushi.a2b4b921.jpg",F=n(17),E=n.n(F),S=function(){return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(d.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},A=n(12),D=n.n(A),B=function(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(i.useContext)(h),o=s.items.reduce((function(e,t){return e+t.amount}),0),l="".concat(D.a.button," ").concat(a?D.a.bump:"");return Object(i.useEffect)((function(){if(0!==s.items.length){c(!0);var e=setTimeout((function(){c(!1)}),300);return function(){clearTimeout(e)}}}),[s.items]),Object(d.jsxs)("button",{className:l,onClick:e.onClick,children:[Object(d.jsx)("span",{className:D.a.icon,children:Object(d.jsx)(S,{})}),Object(d.jsx)("span",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(d.jsx)("span",{className:D.a.badge,children:o})]})},T=function(e){return Object(d.jsxs)(s.a.Fragment,{children:[Object(d.jsxs)("header",{className:E.a.header,children:[Object(d.jsx)("h1",{children:"\u042f\u043f\u043e\u043d\u0430 \u041a\u0443\u0445\u043d\u044f"}),Object(d.jsx)(B,{onClick:e.onShowCart})]}),Object(d.jsx)("div",{className:E.a["main-image"],children:Object(d.jsx)("img",{src:M,alt:"\u0411\u043b\u044e\u0434\u0430 \u044f\u043f\u043e\u043d\u0441\u043a\u043e\u0439 \u043a\u0443\u0445\u043d\u0438"})})]})},P=n(19),z=n.n(P),R=function(){return Object(d.jsxs)("section",{className:z.a["promo-text"],children:[Object(d.jsx)("h2",{children:"\u041e\u043d\u043b\u0430\u0439\u043d \u0421\u0443\u0448\u0438 \u0420\u0435\u0441\u0442\u043e\u0440\u0430\u043d \u042f\u043f\u043e\u043d\u0430 \u041a\u0443\u0445\u043d\u044f"}),Object(d.jsx)("p",{children:"\u042f\u043f\u043e\u043d\u0430 \u041a\u0443\u0445\u043d\u044f - \u044d\u0442\u043e \u043e\u043d\u043b\u0430\u0439\u043d \u0441\u0443\u0448\u0438-\u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043b\u044e\u0431\u0438\u043c\u044b\u0435 \u0441\u0443\u0448\u0438 \u0438 \u0441\u0430\u0448\u0438\u043c\u0438, \u0440\u043e\u043b\u043b\u044b \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0431\u043b\u044e\u0434\u0430 \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u044f\u043f\u043e\u043d\u0441\u043a\u043e\u0439 \u043a\u0443\u0445\u043d\u0438 \u0434\u0435\u043b\u0430\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u0432\u0430\u0440\u043e\u0432."}),Object(d.jsx)("p",{children:"\u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u0438 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441\u0430\u043c\u044b\u0435 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u043f\u0440\u0438\u0434\u0430\u044e\u0442 \u0445\u043e\u0440\u043e\u0448\u0438\u0439 \u0432\u043a\u0443\u0441 \u0431\u043b\u044e\u0434\u0430\u043c, \u0434\u0430\u0440\u044f\u0442 \u043d\u0430\u0441\u043b\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u043e\u0442 \u0442\u0440\u0430\u043f\u0435\u0437\u044b."})]})},J=n(20),V=n(21),K=n.n(V),L=n(22),W=n.n(L),G=function(e){return Object(d.jsx)("div",{className:W.a.card,children:e.children})},X=n(15),Y=n.n(X),q=n(23),Q=n.n(q),Z=s.a.forwardRef((function(e,t){return Object(d.jsxs)("div",{className:Q.a.input,children:[Object(d.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(d.jsx)("input",Object(o.a)({ref:t},e.input))]})})),U=n(24),$=n.n(U),ee=function(e){var t=Object(i.useState)(!0),n=Object(r.a)(t,2),a=n[0],c=n[1],s=Object(i.useRef)();return Object(d.jsxs)("form",{className:$.a.form,onSubmit:function(t){t.preventDefault();var n=s.current.value;0===n.trim().length||+n<1||+n>10?c(!1):e.onAddToCart(+n)},children:[Object(d.jsx)(Z,{ref:s,label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",input:{id:e.id,type:"number",min:"1",step:"1",defaultValue:"1"}}),Object(d.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),!a&&Object(d.jsx)("p",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442 1 \u0434\u043e 10"})]})},te=function(e){var t=Object(i.useContext)(h),n="".concat(e.price.toFixed(2)," \u0440\u0443\u0431");return Object(d.jsxs)("li",{className:Y.a.meal,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:e.name}),Object(d.jsx)("div",{className:Y.a.description,children:e.description}),Object(d.jsx)("div",{className:Y.a.price,children:n})]}),Object(d.jsx)("div",{children:Object(d.jsx)(ee,{onAddToCart:function(n){t.addItem({id:e.id,name:e.name,amount:n,price:e.price})},id:e.id})})]})},ne=n(7),ae=n.n(ne),ce=function(){return Object(d.jsx)("section",{className:ae.a.container,children:Object(d.jsx)("span",{className:ae.a.loading,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})},re=function(){return Object(d.jsx)("section",{className:ae.a.container,children:Object(d.jsx)("span",{className:ae.a.loading,children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})})},ie=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),s=Object(r.a)(c,2),o=s[0],l=s[1],u=Object(i.useState)(),j=Object(r.a)(u,2),m=j[0],b=j[1];Object(i.useEffect)((function(){function e(){return e=Object(C.a)(g.a.mark((function e(){var t,n,c,r,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,fetch("https://apps-93cf2-default-rtdb.firebaseio.com/meals.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new re("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");case 6:return e.next=8,t.json();case 8:n=e.sent,c=[],r=Object(J.a)(n),e.prev=11,r.s();case 13:if((i=r.n()).done){e.next=20;break}if(null!=(s=i.value)){e.next=17;break}return e.abrupt("continue",18);case 17:c.push({id:s.id,name:s.name,description:s.description,price:s.price});case 18:e.next=13;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:a(c),l(!1);case 30:case"end":return e.stop()}}),e,null,[[11,22,25,28]])}))),e.apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){l(!1),b(e.message)}))}),[]);var O=n.map((function(e){return Object(d.jsx)(te,{id:e.id,name:e.name,description:e.description,price:e.price},e.id)}));return o?Object(d.jsx)(ce,{}):m?Object(d.jsx)(re,{}):Object(d.jsx)("section",{className:K.a.meals,children:Object(d.jsx)(G,{children:Object(d.jsx)("ul",{children:O})})})},se=n(25),oe=function(){return Object(d.jsxs)(s.a.Fragment,{children:[Object(d.jsx)(R,{}),Object(d.jsx)(se.a,{fallback:Object(d.jsx)("p",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}),children:Object(d.jsx)(ie,{})})]})},le=n(18),ue={items:[],totalAmount:0},de=function(e,t){if("ADD_ITEM"===t.type){var n,a,c=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),i=e.items[r];return i?(n=Object(o.a)(Object(o.a)({},i),{},{amount:i.amount+t.item.amount}),(a=Object(le.a)(e.items))[r]=n):(n=Object(o.a)({},t.item),a=e.items.concat(n)),{items:a,totalAmount:c}}if("REMOVE_ITEM"===t.type){var s,l=e.items.findIndex((function(e){return e.id===t.id})),u=e.items[l],d=e.totalAmount-u.price;if(1===u.amount)s=e.items.filter((function(e){return e.id!==t.id}));else{var j=Object(o.a)(Object(o.a)({},u),{},{amount:u.amount-1});(s=Object(le.a)(e.items))[l]=j}return{items:s,totalAmount:d}}return ue},je=function(e){var t=Object(i.useReducer)(de,ue),n=Object(r.a)(t,2),a=n[0],c=n[1],s={items:a.items,totalAmount:a.totalAmount,addItem:function(e){c({type:"ADD_ITEM",item:e})},removeItem:function(e){c({type:"REMOVE_ITEM",id:e})}};return Object(d.jsx)(h.Provider,{value:s,children:e.children})};var me=function(){var e=Object(i.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.jsxs)(je,{children:[n&&Object(d.jsx)(w,{onHideCart:function(){a(!1)}}),Object(d.jsx)(T,{onShowCart:function(){a(!0)}}),Object(d.jsx)("main",{children:Object(d.jsx)(oe,{})})]})};c.a.render(Object(d.jsx)(me,{}),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.06f73a3a.chunk.js.map